import{_ as T}from"./_plugin-vue_export-helper-CtXoblKC.js";import{q as K}from"./quiz.service-BbSLNhP5.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                */import{o as u,g as z,w as e,l as Q,G as g,N as D,O as ee,c as I,P as M,r as C,Q as N,h as s,i as P,R as b,y as te,S as R,U as H,V as L,W as x,X as B,Y as se,j as E,C as ne,F as oe,L as A,Z as ae,_ as ie,$ as le,A as re,u as ue,a0 as ce}from"./index-Cmehh-cC.js";import{b as de}from"./quiz1-B-g1FBX0.js";/* empty css                    */const me={},pe={class:"colums"},_e={class:"column-one"},fe={class:"column-two"};function he(_,f){const i=ee;return u(),z(i,{shadow:"hover",class:"card-quiz"},{header:e(()=>[Q("h3",null,g(_.$t("CreateNewQuiz")),1)]),default:e(()=>[Q("div",pe,[Q("div",_e,[D(_.$slots,"first-column",{},void 0,!0)]),Q("div",fe,[D(_.$slots,"second-column",{},void 0,!0)])])]),_:3})}const O=T(me,[["render",he],["__scopeId","data-v-52a616b8"]]),ve={class:"image"},ze={class:"submit-button"},Qe=I({__name:"AddNewQuizCard",emits:["createQuiz"],setup(_,{emit:f}){const{t:i}=M(),a=C(),v=f,c=N({quizName:"",quizTheme:""}),r=N({quizName:[{required:!0,message:i("TheFieldMustNotBeEmpty"),trigger:"change"},{min:4,message:i("NameMinLength"),trigger:"change"}],quizTheme:[{required:!0,message:i("TheFieldMustNotBeEmpty"),trigger:"change"},{min:4,message:i("NameMinLength"),trigger:"change"}]}),w=async n=>{n&&await n.validate((d,m)=>{d&&v("createQuiz",{...c})})};return(n,d)=>{const m=te,p=R,t=H,$=L,F=x;return u(),z(O,null,{"first-column":e(()=>[Q("div",ve,[s(m,{src:P(de),fit:"contain",class:"image-card"},null,8,["src"])])]),"second-column":e(()=>[s(F,{ref_key:"createQuizFormRef",ref:a,"label-position":"top","label-width":"100px",model:c,class:"add-form",rules:r},{default:e(()=>[s(t,{label:n.$t("CreateNewQuizName"),prop:"quizName"},{default:e(()=>[s(p,{modelValue:c.quizName,"onUpdate:modelValue":d[0]||(d[0]=q=>c.quizName=q)},null,8,["modelValue"])]),_:1},8,["label"]),s(t,{label:n.$t("CreateNewQuizTheme"),prop:"quizTheme"},{default:e(()=>[s(p,{modelValue:c.quizTheme,"onUpdate:modelValue":d[1]||(d[1]=q=>c.quizTheme=q)},null,8,["modelValue"])]),_:1},8,["label"]),s(t,null,{default:e(()=>[Q("div",ze,[s($,{type:"primary",onClick:d[2]||(d[2]=q=>w(a.value))},{default:e(()=>[b(g(n.$t("Create")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}}),we=T(Qe,[["__scopeId","data-v-5d024210"]]),ge=_=>{const f=B();let i=0,a=0;return _.forEach(v=>{v.answer.trim().length===0&&a++,v.correctAnswer&&i++}),a>0?(f.SetNofication("Error","AnswersFieldsDontBeEmpty","error"),!1):i===0?(f.SetNofication("Error","OneAnswerMustBeRigth","error"),!1):!0},qe={class:"questions-tree"},ye={class:"answer-item"},be={key:1,class:"buttons-preview"},Ne={key:0,class:"publish-quiz"},$e=I({__name:"AddQuestionsCard",props:["quizName"],emits:["publishQuiz"],setup(_,{emit:f}){const{t:i}=M(),a=_,v=f,c=C(),r=C(!1),w=B(),n=C(-1),d={children:"children",label:"label"},m=N([{label:a.quizName,children:[]}]),p=N([]),t=N({question:"",answers:[]}),$=()=>{t.answers=[],t.question="",r.value=!1},F=()=>{t.answers.push({key:Date.now(),answer:"",correctAnswer:!1})},q=o=>{const l=t.answers.indexOf(o);l!==-1&&t.answers.splice(l,1)},G=o=>{o&&o.validate(l=>{var k;l&&ge(t.answers)&&(p.push({question:t.question,answers:t.answers}),(k=m[0].children)==null||k.push({label:`${i("Question")} ${m[0].children.length+1}`}),$())})},j=o=>{const l=m[0].children.indexOf(o);l!==-1?(n.value=-1,n.value=l,t.question=p[l].question,t.answers=p[l].answers,r.value=!0):$()},W=()=>{n.value!==-1&&(p[n.value].question=t.question,p[n.value].answers=t.answers,w.SetNofication("Success","EditQuizQuestionSuccess","success"))},X=()=>{n.value!==-1&&(p.splice(n.value,1),m[0].children.pop(),$(),w.SetNofication("Success","DeleteQuizQuestionSuccess","success"))},Y=()=>{v("publishQuiz",{...p})};return(o,l)=>{const k=ae,U=R,V=H,y=L,Z=le,J=x;return u(),z(O,null,{"first-column":e(()=>[Q("div",qe,[s(k,{data:m,props:d,onNodeClick:j},null,8,["data"])])]),"second-column":e(()=>[s(J,{ref_key:"addQuestionFormRef",ref:c,"label-position":"top","label-width":"100px",model:t},{default:e(()=>[s(V,{label:o.$t("InputQuizQuestion"),prop:"question",rules:[{required:!0,message:o.$t("TheFieldMustNotBeEmpty"),trigger:"blur"},{min:10,message:o.$t("TheQuestionIsVeryShort"),trigger:["blur","change"]}]},{default:e(()=>[s(U,{type:"textarea",modelValue:t.question,"onUpdate:modelValue":l[0]||(l[0]=h=>t.question=h)},null,8,["modelValue"])]),_:1},8,["label","rules"]),s(V,null,{default:e(()=>[s(y,{type:"primary",onClick:F},{default:e(()=>[b(g(o.$t("AddQuizAnswerButton")),1)]),_:1})]),_:1}),s(se,{name:"list",tag:"p"},{default:e(()=>[(u(!0),E(oe,null,ne(t.answers,h=>(u(),z(V,{key:h.key,class:"answer-item-form",label:o.$t("AddQuizAnswer")},{default:e(()=>[Q("div",ye,[s(Z,{modelValue:h.correctAnswer,"onUpdate:modelValue":S=>h.correctAnswer=S,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":o.$t("Correct"),"inactive-text":o.$t("InCorrect"),"validate-event":!1},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"]),s(U,{type:"text",modelValue:h.answer,"onUpdate:modelValue":S=>h.answer=S},null,8,["modelValue","onUpdate:modelValue"]),s(y,{type:"danger",icon:P(ie),circle:"",onClick:S=>q(h)},null,8,["icon","onClick"])])]),_:2},1032,["label"]))),128))]),_:1}),t.answers.length>=2?(u(),z(V,{key:0},{default:e(()=>[r.value?A("",!0):(u(),z(y,{key:0,type:"primary",onClick:l[1]||(l[1]=h=>G(c.value))},{default:e(()=>[b(g(o.$t("addQuizQuestion")),1)]),_:1})),r.value?(u(),E("div",be,[s(y,{type:"warning",onClick:W},{default:e(()=>[b(g(o.$t("EditQuizQuestion")),1)]),_:1}),s(y,{type:"danger",onClick:X},{default:e(()=>[b(g(o.$t("DeleteQuizQuestion")),1)]),_:1})])):A("",!0)]),_:1})):A("",!0)]),_:1},8,["model"]),p.length>=3?(u(),E("div",Ne,[s(y,{type:"success",onClick:Y},{default:e(()=>[b(g(o.$t("PublishQuiz")),1)]),_:1})])):A("",!0)]),_:1})}}}),Ce=T($e,[["__scopeId","data-v-556e09ce"]]),ke={class:"main-content"},Me=I({__name:"CreateNewQuiz",setup(_){const f=B(),i=C(!1),a=N({name:"",theme:"",questions:[]}),v=r=>{a.name=r.quizName,a.theme=r.quizTheme},c=async r=>{var m;i.value=!0;const w=ue();a.questions=r;const n={...a,userId:(m=w.user)==null?void 0:m.uid};await K.addQuiz(n)&&(f.SetNofication("Success","PublishQuizSuccess","success"),a.name="",a.theme="",a.questions=[]),i.value=!1};return(r,w)=>{const n=ce;return re((u(),E("div",ke,[a.name.length===0?(u(),z(we,{key:0,onCreateQuiz:v})):(u(),z(Ce,{key:1,quizName:a.name,onPublishQuiz:c},null,8,["quizName"]))])),[[n,i.value]])}}});export{Me as default};
