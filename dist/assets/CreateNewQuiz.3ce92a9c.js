import{_ as F}from"./_plugin-vue_export-helper.79fb6c6e.js";import{q as X}from"./quiz.service.7fcab847.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                */import{o as d,g as z,w as e,l as w,G as Q,Z as x,_ as Y,c as T,a0 as D,r as $,a1 as b,h as s,i as M,a2 as q,x as ee,a3 as U,a4 as H,a5 as L,a6 as P,a7 as I,a8 as te,a9 as se,aa as ne,j as A,B as oe,F as ae,L as S,ab as ie,ac as le,z as re,u as ue}from"./index.c5b698de.js";import{b as ce}from"./quiz1.1d0b9635.js";/* empty css                    */const de={},me={class:"colums"},_e={class:"column-one"},pe={class:"column-two"};function fe(_,p){const i=Y;return d(),z(i,{shadow:"hover",class:"card-quiz"},{header:e(()=>[w("h3",null,Q(_.$t("CreateNewQuiz")),1)]),default:e(()=>[w("div",me,[w("div",_e,[x(_.$slots,"first-column",{},void 0,!0)]),w("div",pe,[x(_.$slots,"second-column",{},void 0,!0)])])]),_:3})}const R=F(de,[["render",fe],["__scopeId","data-v-52a616b8"]]),he={class:"image"},ve={class:"submit-button"},ze=T({__name:"AddNewQuizCard",emits:["createQuiz"],setup(_,{emit:p}){const{t:i}=D(),o=$(),l=b({quizName:"",quizTheme:""}),v=b({quizName:[{required:!0,message:i("TheFieldMustNotBeEmpty"),trigger:"change"},{min:4,message:i("NameMinLength"),trigger:"change"}],quizTheme:[{required:!0,message:i("TheFieldMustNotBeEmpty"),trigger:"change"},{min:4,message:i("NameMinLength"),trigger:"change"}]}),m=async a=>{!a||await a.validate((r,f)=>{r&&p("createQuiz",{...l})})};return(a,r)=>{const f=ee,u=U,t=H,N=L,E=P;return d(),z(R,null,{"first-column":e(()=>[w("div",he,[s(f,{src:M(ce),fit:"contain",class:"image-card"},null,8,["src"])])]),"second-column":e(()=>[s(E,{ref_key:"createQuizFormRef",ref:o,"label-position":"top","label-width":"100px",model:l,class:"add-form",rules:v},{default:e(()=>[s(t,{label:a.$t("CreateNewQuizName"),prop:"quizName"},{default:e(()=>[s(u,{modelValue:l.quizName,"onUpdate:modelValue":r[0]||(r[0]=g=>l.quizName=g)},null,8,["modelValue"])]),_:1},8,["label"]),s(t,{label:a.$t("CreateNewQuizTheme"),prop:"quizTheme"},{default:e(()=>[s(u,{modelValue:l.quizTheme,"onUpdate:modelValue":r[1]||(r[1]=g=>l.quizTheme=g)},null,8,["modelValue"])]),_:1},8,["label"]),s(t,null,{default:e(()=>[w("div",ve,[s(N,{type:"primary",onClick:r[2]||(r[2]=g=>m(o.value))},{default:e(()=>[q(Q(a.$t("Create")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1})}}});const we=F(ze,[["__scopeId","data-v-5d024210"]]);const Qe=_=>{const p=I();let i=0,o=0;return _.forEach(l=>{l.answer.trim().length===0&&o++,l.correctAnswer&&i++}),o>0?(p.SetNofication("Error","AnswersFieldsDontBeEmpty","error"),!1):i===0?(p.SetNofication("Error","OneAnswerMustBeRigth","error"),!1):!0},ge={class:"questions-tree"},ye={class:"answer-item"},qe={key:1,class:"buttons-preview"},be={key:0,class:"publish-quiz"},Ne=T({__name:"AddQuestionsCard",props:["quizName"],emits:["publishQuiz"],setup(_,{emit:p}){const i=_,{t:o}=D(),l=$(),v=$(!1),m=I(),a=$(-1),r={children:"children",label:"label"},f=b([{label:i.quizName,children:[]}]),u=b([]),t=b({question:"",answers:[]}),N=()=>{t.answers=[],t.question="",v.value=!1},E=()=>{t.answers.push({key:Date.now(),answer:"",correctAnswer:!1})},g=n=>{const c=t.answers.indexOf(n);c!==-1&&t.answers.splice(c,1)},O=n=>{!n||n.validate(c=>{var C;c&&Qe(t.answers)&&(u.push({question:t.question,answers:t.answers}),(C=f[0].children)==null||C.push({label:`${o("Question")} ${f[0].children.length+1}`}),N())})},G=n=>{const c=f[0].children.indexOf(n);c!==-1?(a.value=-1,a.value=c,t.question=u[c].question,t.answers=u[c].answers,v.value=!0):N()},j=()=>{a.value!==-1&&(u[a.value].question=t.question,u[a.value].answers=t.answers,m.SetNofication("Success","EditQuizQuestionSuccess","success"))},Z=()=>{a.value!==-1&&(u.splice(a.value,1),f[0].children.pop(),N(),m.SetNofication("Success","DeleteQuizQuestionSuccess","success"))},J=()=>{p("publishQuiz",{...u})};return(n,c)=>{const C=te,B=U,k=H,y=L,K=se,W=P;return d(),z(R,null,{"first-column":e(()=>[w("div",ge,[s(C,{data:f,props:r,onNodeClick:G},null,8,["data"])])]),"second-column":e(()=>[s(W,{ref_key:"addQuestionFormRef",ref:l,"label-position":"top","label-width":"100px",model:t},{default:e(()=>[s(k,{label:n.$t("InputQuizQuestion"),prop:"question",rules:[{required:!0,message:n.$t("TheFieldMustNotBeEmpty"),trigger:"blur"},{min:10,message:n.$t("TheQuestionIsVeryShort"),trigger:["blur","change"]}]},{default:e(()=>[s(B,{type:"textarea",modelValue:t.question,"onUpdate:modelValue":c[0]||(c[0]=h=>t.question=h)},null,8,["modelValue"])]),_:1},8,["label","rules"]),s(k,null,{default:e(()=>[s(y,{type:"primary",onClick:E},{default:e(()=>[q(Q(n.$t("AddQuizAnswerButton")),1)]),_:1})]),_:1}),s(ne,{name:"list",tag:"p"},{default:e(()=>[(d(!0),A(ae,null,oe(t.answers,h=>(d(),z(k,{key:h.key,class:"answer-item-form",label:n.$t("AddQuizAnswer")},{default:e(()=>[w("div",ye,[s(K,{modelValue:h.correctAnswer,"onUpdate:modelValue":V=>h.correctAnswer=V,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":n.$t("Correct"),"inactive-text":n.$t("InCorrect"),"validate-event":!1},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"]),s(B,{type:"text",modelValue:h.answer,"onUpdate:modelValue":V=>h.answer=V},null,8,["modelValue","onUpdate:modelValue"]),s(y,{type:"danger",icon:M(ie),circle:"",onClick:V=>g(h)},null,8,["icon","onClick"])])]),_:2},1032,["label"]))),128))]),_:1}),t.answers.length>=2?(d(),z(k,{key:0},{default:e(()=>[v.value?S("",!0):(d(),z(y,{key:0,type:"primary",onClick:c[1]||(c[1]=h=>O(l.value))},{default:e(()=>[q(Q(n.$t("addQuizQuestion")),1)]),_:1})),v.value?(d(),A("div",qe,[s(y,{type:"warning",onClick:j},{default:e(()=>[q(Q(n.$t("EditQuizQuestion")),1)]),_:1}),s(y,{type:"danger",onClick:Z},{default:e(()=>[q(Q(n.$t("DeleteQuizQuestion")),1)]),_:1})])):S("",!0)]),_:1})):S("",!0)]),_:1},8,["model"]),u.length>=3?(d(),A("div",be,[s(y,{type:"success",onClick:J},{default:e(()=>[q(Q(n.$t("PublishQuiz")),1)]),_:1})])):S("",!0)]),_:1})}}});const $e=F(Ne,[["__scopeId","data-v-556e09ce"]]),Ce={class:"main-content"},De=T({__name:"CreateNewQuiz",setup(_){const p=I(),i=$(!1),o=b({name:"",theme:"",questions:[]}),l=m=>{o.name=m.quizName,o.theme=m.quizTheme},v=async m=>{var u;i.value=!0;const a=ue();o.questions=m;const r={...o,userId:(u=a.user)==null?void 0:u.uid};await X.addQuiz(r)&&(p.SetNofication("Success","PublishQuizSuccess","success"),o.name="",o.theme="",o.questions=[]),i.value=!1};return(m,a)=>{const r=le;return re((d(),A("div",Ce,[o.name.length===0?(d(),z(we,{key:0,onCreateQuiz:l})):(d(),z($e,{key:1,quizName:o.name,onPublishQuiz:v},null,8,["quizName"]))])),[[r,i.value]])}}});export{De as default};
